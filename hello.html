<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="popup.css">
  </head>
  <body>
    <img
      src="assets/star_mascot.png"
      alt="Mascot"
      class="popup-mascot"
    />
    <img
      src="assets/stickysend-logo.png"
      alt="Sticky Send"
      class="popup-logo"
    />
    <div id="loginContainer">
      <button id="loginBtn">Login with Google</button>
    </div>
    <div id="loggedInContainer">
      <div id="stickerBanner" class="sticker-banner"></div>
      <div class="status">✓ Logged in</div>
      <div class="user-info" id="userInfo"></div>
      <div id="usersListContainer">
        <div id="usersListLoading" class="loading">Loading users...</div>
        <div id="usersDropdown">
          <select id="usersSelect" style="width:100%;">
            <option value="">Loading users...</option>
          </select>
        </div>
        <div id="usersList" class="users-list" style="display:none"></div>
      </div>
      <div id="stickersContainer" style="margin-top:12px;">
        <div style="font-weight:600; margin-bottom:6px;">Choose a sticker</div>
        <div id="stickersGallery" style="display:flex; gap:8px; flex-wrap:wrap; max-height:220px; overflow:auto;">
          <div class="loading">Loading stickers...</div>
        </div>
        <div id="stickerPreview" style="margin-top:8px; min-height:40px;"></div>
      </div>
      <!-- Controls: Send button visible; More button is top-right and opens an overlay -->
      <div id="controlsRow" style="display:flex; gap:8px; align-items:center; margin-top:8px;">
        <button id="sendStickerBtn" style="width:100%;">Send Sticker</button>
      </div>

      <!-- More button (top-right) -->
      <button id="moreBtn" aria-label="More" title="More" style="position:fixed; top:8px; right:8px; width:36px; height:36px; border-radius:18px; border:1px solid #ccc; background:#fff; cursor:pointer; z-index:1200;">⋯</button>

      <!-- Full-screen overlay for more features -->
  <div id="moreOverlay" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:1300; align-items:center; justify-content:center;">
        <div id="moreCard" style="background:#fff; padding:12px; border-radius:8px; min-width:200px; box-shadow:0 6px 24px rgba(0,0,0,0.3);">
          <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:8px;">
            <div style="font-weight:600;">More</div>
            <button id="moreCloseBtn" aria-label="Close" style="background:transparent;border:none;font-size:18px;cursor:pointer;">×</button>
          </div>
          <div style="display:flex; flex-direction:column; gap:8px;">
            <button id="logoutBtn" style="padding:8px 10px; border-radius:6px; border:1px solid #ddd; background:#fff; cursor:pointer; text-align:left;">Logout</button>
            <!-- Future feature buttons - keep visible in overlay -->
            <button id="featureBtn1" style="padding:8px 10px; border-radius:6px; border:1px solid #ddd; background:#fff; cursor:pointer; text-align:left;">Feature A</button>
            <button id="featureBtn2" style="padding:8px 10px; border-radius:6px; border:1px solid #ddd; background:#fff; cursor:pointer; text-align:left;">Feature B</button>
          </div>
        </div>
      </div>
      <button id="testBtn">Test</button>
    </div>
    <script src="supabase.js"></script>
    <script src="config.js"></script>
    <script type="module" src="popup.js"></script>
  </body>
</html>