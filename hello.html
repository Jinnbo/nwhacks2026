<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="popup.css">
  </head>
  <body>
    <img
      src="assets/star_mascot.png"
      alt="Mascot"
      class="popup-mascot"
    />
    <img
      src="assets/stickysend-logo.png"
      alt="Sticky Send"
      class="popup-logo"
    />
    <div id="loginContainer">
      <button id="loginBtn">Login with Google</button>
    </div>
    <div id="loggedInContainer">
      <div id="stickerBanner" class="sticker-banner"></div>
      <div class="user-info" id="userInfo"></div>
      <!-- users dropdown moved to bottom to avoid auto-submit on selection -->
      <div id="stickersContainer" style="margin-top:12px;">
        <div style="font-weight:600; margin-bottom:6px;">Choose a sticker</div>
        <div id="stickersGallery" style="display:flex; gap:8px; flex-wrap:wrap; max-height:220px; overflow:auto;">
          <div class="loading">Loading stickers...</div>
        </div>
      </div>

      <!-- users dropdown (moved to bottom) -->
      <div id="usersListContainer">
        <div id="usersListLoading" class="loading">Loading users...</div>
        <div id="usersDropdown" class="cute-dropdown">
          <div id="usersSelected" class="dropdown-trigger">Select user â–¾</div>
          <div id="usersList" class="users-list" style="display:none"></div>
        </div>
      </div>

      <!-- Controls: Send button visible -->
      <div id="controlsRow" style="display:flex; gap:2px; align-items:center; margin-top:8px;">
        <button id="sendStickerBtn" style="width:100%;">Send Sticker</button>
      </div>

      <!-- Plus button (top-right) -->
      <button id="testBtn" style="position:fixed; top:8px; right:8px; background:none; border:none; padding:0; cursor:pointer; z-index:1500;"><img src="assets/plus.png" alt="Add" style="width:24px; height:24px;"></button>
    </div>
    <script src="supabase.js"></script>
    <script src="config.js"></script>
    <script type="module" src="popup.js"></script>
  </body>
</html>